<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>注册</title>
    <link rel="stylesheet" href="static/layui/css/layui.css">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="static/css/style.css">
    <style>
    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="col-md-4 col-md-offset-4">

            <!-- Start Sign In Form -->
            <div class="fh5co-form animate-box" data-animate-effect="fadeIn">
                <h2>注册</h2>
                <div class="form-group">
                    <div class="alert alert-success" role="alert">用户名将被用来登陆，请牢记。</div>
                </div>
                <div class="form-group">
                    <label for="name" class="sr-only">Name</label>
                    <input type="text" class="form-control" id="username" placeholder="用户名">
                </div>
                <div class="form-group">
                    <label for="email" class="sr-only">Email</label>
                    <input type="email" class="form-control" id="email" placeholder="邮箱">
                </div>
                <div class="form-group">
                    <label for="password" class="sr-only">Password</label>
                    <input type="password" class="form-control" id="password" placeholder="密码">
                </div>
                <div class="form-group">
                    <label for="re-password" class="sr-only">Re-type Password</label>
                    <input type="password" class="form-control" id="re-password" placeholder="重复密码">
                </div>
                <div class="form-group">
                    <label for="remember"><input type="checkbox" id="remember"> Remember Me</label>
                </div>
                <div class="form-group">
                    <p>已有账号? <a href="/login">登陆</a></p>
                </div>
                <div class="form-group">
                    <input type="submit" id="register-button" value="注册" class="btn btn-primary">
                </div>
            </div>
            <!-- END Sign In Form -->
        </div>
    </div>
</div>

<script src="static/layui/layui.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<script>
    layui.use(['layer'], function(){
        var layer = layui.layer;
        $('#register-button').click(doregister)

        function doregister() {
            var password1 = $("#password").val();
            var password2 = $("#re-password").val();
            if(password1 != password2){
                layer.msg('两次密码不一致');
            }else {
                $.post('/doregister',{
                    username:$("#username").val(),
                    password:$("#password").val(),
                    email:$("#email").val()
                },function (result) {
                    if(result == -1){
                        layer.msg('用户名已存在')
                    }else if (result == 1){
                        layer.msg('注册成功，3秒后跳转到登陆页')
                        setTimeout(function(){ window.location.href="http://120.79.25.54/login" },3000)
                    }
                })
            }
        }

    });
</script>
</body>
</html>